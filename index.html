<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Keep all existing styles and structure -->
    <style>
        /* ... (existing styles remain unchanged) ... */
    </style>
</head>
<body>
    <div class="container">
        <!-- ... (existing HTML structure remains unchanged) ... -->
    </div>

    <script>
        document.getElementById('storageForm').addEventListener('submit', function(event) {
            event.preventDefault();

            // ... (existing input handling code remains unchanged) ...

            // MODIFIED CALENDAR WEEK CALCULATION
            function calculateCalendarWeeks(startDate, endDate) {
                let weeks = 0;
                let current = new Date(startDate);
                
                // Find first Sunday (start of a calendar week)
                while(current.getDay() !== 0 && current <= endDate) {
                    current.setDate(current.getDate() + 1);
                }
                
                // If we passed end date during search
                if(current > endDate) return 1; // Partial week counts as 1

                // Now count full weeks
                while(current <= endDate) {
                    weeks++;
                    current.setDate(current.getDate() + 7);
                }
                
                return weeks;
            }

            // ... (rest of the code remains unchanged) ...
        });
    </script>
</body>
</html>
